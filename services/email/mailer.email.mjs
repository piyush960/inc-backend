import nodemailer from 'nodemailer';

function emailService() {
    const transporter = nodemailer.createTransport({
        pool: true,
        service: 'gmail',
        port: 465,
        auth: {
            user: process.env.EMAIL_ADDRESS || 'queries.pictinc2023@gmail.com',
            pass: process.env.EMAIL_PASSWORD || 'ickspmzsiscxqlmb'
        },
        tls: {
            rejectUnauthorized: false
        }
    })

    function judgeRegistrationEmail(judge) {
        try {
            const mailOptions = {
                from: `InC'2023 ${process.env.EMAIL_ADDRESS}`,
                to: `${judge.name} ${judge.email}`,
                bcc: `${process.env.EMAIL_ADDRESS}`,
                replyTo: process.env.EMAIL_ADDRESS,
                subject: 'Registered for PICT InC 2023 Judging',
                priority: 'high',
                text: 'Email content',
                html: `
                <table border="0"cellpadding="0"cellspacing="0"width="100%"style="table-layout:fixed;background-color:#f9f9f9"id="bodyTable"> <tbody> <tr> <td style="padding-right:10px;padding-left:10px"valign="top"align="center"id="bodyCell"> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="wrapperWebview"style="max-width:600px"> <tbody> <tr> <td valign="top"align="center"> <table border="0"cellpadding="0"cellspacing="0"width="100%"> <tbody> <tr></tr> </tbody> </table> </td> </tr> </tbody> </table> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="wrapperBody"style="max-width:600px"> <tbody> <tr style="padding:10px 30px;font-size:24px;font-weight:700;text-align:center;display:flex;align-items:center;background:#2563eb2d;margin-bottom:10px;border-radius:10px;border:1px solid #0759855a"> <td> <a href="https://pictinc.org"style="text-decoration:none"><img alt="PICT InC Logo"src="https://res.cloudinary.com/job-kart/image/upload/v1677563341/inc_logo_f6oa8l.png"style="width:100px;max-width:80%;height:auto;border:none;text-decoration:none;color:#fff"width="100"></a> </td> <td><span>PICT InC 2023</span></td> </tr> <tr></tr> <tr> <td valign="top"align="center"> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="tableCard"style="background-color:#fff;border-color:#e5e5e5;border-style:solid;border-width:0 1px 1px 1px;border-radius:10px"> <tbody> <tr> <td style="background-color:#f2a30f;font-size:1px;line-height:3px"class="topBorder"height="3"> </td> </tr> <tr> <td style="padding-top:20px;padding-bottom:5px;padding-left:20px;padding-right:20px"class="mainTitle"valign="top"align="center"> <h2 class="text"style="color:#000;font-family:Poppins,Helvetica,Arial,sans-serif;font-size:28px;font-weight:500;font-style:normal;letter-spacing:normal;line-height:36px;text-transform:none;text-align:center;padding:0;margin:0"> Registered for InC'23 Judging </h2> </td> </tr> <tr> <td style="padding-bottom:30px;padding-left:20px;padding-right:20px"class="subTitle"valign="top"align="center"> <h4 style="color:#999;font-family:Poppins,Helvetica,Arial,sans-serif;font-size:16px;font-weight:500;font-style:normal;letter-spacing:normal;line-height:24px;text-transform:none;text-align:center;padding:0;margin:0"class="text"> ${judge.email} </h4> </td> </tr> <tr> <td style="padding-left:20px;padding-right:20px"class="containtTable ui-sortable"valign="top"align="center"> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="tableDescription"> <tbody> <tr> <td style="padding-bottom:20px"class="description"valign="top"align="center"> <p class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:center;padding:0;margin:0"> Thank you for joining PICT InC'23. We hope you will have a great time here. </p> </td> </tr> </tbody> </table> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="tableDescription"> <tbody> <tr> <td style="padding-bottom:20px"class="description"valign="top"align="center"> <h4 style="color:#050505;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:center;padding:0;margin:0">Judge ID - ${judge.jid}</h4> </td> </tr> </tbody> </table> <table border="0"cellpadding="0"cellspacing="0"width="95%"class="tableDescription"style="border:1px dashed #000;padding:5%"> <tbody> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> Name - </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.name} </h1> </td> </tr> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> Email - </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.email} </h1> </td> </tr> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> phone - </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.phone} </h1> </td> </tr> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> Address - </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.address} </h1> </td> </tr> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> Company/Organization - </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.company} </h1> </td> </tr> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> Slots - </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <span class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.slot1} </span> <span class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.slot2} </span> </td> </tr> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> Domains- </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.domains} </h1> </td> </tr> <tr> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> Events - </h1> </td> <td style="padding-bottom:20px;align-items:center"class="description"valign="top"> <h1 class="text"style="color:#666;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:18px;font-weight:400;font-style:normal;letter-spacing:normal;text-transform:none;text-align:left;padding:0;margin:0"> ${judge.event} </h1> </td> </tr> </tbody> </table> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="space"> <tbody> <tr> <td style="font-size:1px;line-height:1px"height="30"> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="wrapperFooter"style="max-width:600px"> <tbody> <tr> <td valign="top"align="center"> <table border="0"cellpadding="0"cellspacing="0"width="100%"class="footer"> <tbody> <tr> <td style="padding-top:10px;padding-bottom:10px;padding-left:10px;padding-right:10px"class="socialLinks"valign="top"align="center"> <a href="#facebook-link"style="display:inline-block"target="_blank"class="facebook"> <img alt=""src="https://i2.lensdump.com/i/ZBA8wH.png"style="height:auto;width:100%;max-width:40px;margin-left:2px;margin-right:2px;margin-bottom:7px"width="40"border="0"> </a> <a href="#twitter-link"style="display:inline-block"target="_blank"class="pintrest"> <img alt=""src="https://i.lensdump.com/i/ZBAiKc.png"style="height:auto;width:100%;max-width:40px;margin-left:2px;margin-right:2px;margin-bottom:7px"width="40"border="0"> </a> <a href="#instagram-link"style="display:inline-block"target="_blank"class="instagram"> <img alt=""src="https://img.freepik.com/free-vector/instagram-vector-social-media-icon-7-june-2021-bangkok-thailand_53876-136728.jpg?w=740&t=st=1677584836~exp=1677585436~hmac=4c445d4c5b8cdfb157e3e73fd143570eabbc168e4f46dc445e15c60c188a68e3"style="height:auto;width:100%;max-width:50px;border-radius:50px"width="40"border="0"> </a> <a href="https://linkedin.com/in/chris-muster-832b57a1"style="display:inline-block"target="_blank"class="linkdin"> <img alt=""src="https://i3.lensdump.com/i/ZBAW11.png"style="height:auto;width:100%;max-width:40px;margin-right:2px;margin-bottom:7px"width="40"border="0"> </a> </td> </tr> <tr> <td style="padding:10px 10px 5px"class="brandInfo"valign="top"align="center"> <p class="text"style="color:#bbb;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:12px;font-weight:400;font-style:normal;letter-spacing:normal;line-height:20px;text-transform:none;text-align:center;padding:0;margin:0"> © PICT INC 2023. All rights reserved | PICT PUNE , Pune - 411043 | INDIA </p> </td> </tr> <tr> <td style="padding:0 10px 10px"class="footerEmailInfo"valign="top"align="center"> <p class="text"style="color:#bbb;font-family:'Open Sans',Helvetica,Arial,sans-serif;font-size:12px;font-weight:400;font-style:normal;letter-spacing:normal;line-height:20px;text-transform:none;text-align:center;padding:0;margin:0"> If you have any query please contact us <a href="#"style="color:#bbb;text-decoration:underline"target="_blank">pict.inc@mail.com. <br> </a></p> </td> </tr> <tr> <td style="font-size:1px;line-height:1px"height="30"> </td> </tr> </tbody> </table> </td> </tr> <tr> <td style="font-size:1px;line-height:1px"height="30"> </td> </tr> </tbody> </table> </td> </tr> </tbody> </table></table>
                `
            }
            return transporter.sendMail(mailOptions, (err, info) => {
                if (err) {
                    console.log(err)
                    throw err
                }
                return info
            })
        } catch (err) { throw err }
    }

    return {
        judgeRegistrationEmail,
    }
}

export default emailService;